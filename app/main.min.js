/*! ucasting 2016-05-03 */
$(document).ready(function(){$(".carousel").loadCarousel()}),jQuery.fn.loadCarousel=function(){function fetchImage(bullet){var index=$(bullet).data("image-index");margin=-(80*(index-1)+70),1==index&&(margin=-(70*index)),$imageBox.first().css("margin-left",margin+"%"),checkBullet(bullet)}function checkBullet(bullet){bullet.length>0&&($bullets.removeClass("on"),bullet.addClass("on"))}var $imagesPre=this.find("img"),$carousel=this,images=[],bullets=($imagesPre.length,"");$imagesPre.each(function(index,element){var imgAux={index:index,src:$(this).attr("src"),title:$(this).data("title"),desc:$(this).data("desc")};$(this).replaceWith('<div class="image-box" data-index="'+imgAux.index+'"></div>');var $thisImageBox=$(".image-box[data-index="+index+"]");$thisImageBox.append('<div class="carousel-img" style="background-image: url('+imgAux.src+')">'),$thisImageBox.append('<div class="title">'+imgAux.title+"</div>"),$thisImageBox.append('<div class="desc">'+imgAux.desc+"</div>"),bullets+="<div class='bullet carousel-component' data-image-index='"+imgAux.index+"'></div>"}),this.append('<div class="box-arrow left"><div class="arrow"><div><div>'),this.append('<div class="box-arrow right"><div class="arrow"><div><div>'),this.append('<div class="bullets">'+bullets+"</div>"),this.find(".bullet").first().addClass("on");var $bullets=this.find(".bullet"),$imageBox=this.find(".image-box"),$arrow=this.find(".box-arrow"),positionStart=0,positionEnd=0;jQuery(".carousel-img").each(function(index,element){var imageWidth=$(this).closest(".image-box").width(),imgAux={index:index,src:$(this).attr("src"),width:imageWidth,title:$(this).data("title"),desc:$(this).data("desc")};images.push(imgAux)}),$bullets.bind("click",function(){fetchImage($(this))}),$arrow.bind("click",function(){var $bulletOn=$(".bullet.on"),$isArrowLeft=$(this).hasClass("left"),$bulletTarget=null;$bulletTarget=$isArrowLeft?$bulletOn.prev():$bulletOn.next(),fetchImage($bulletTarget)}),$imageBox.bind("click",function(){var index=$(this).data("index"),$bullet=$(".bullet[data-image-index="+index+"]");fetchImage($bullet)}),$carousel.bind("touchstart",function(event){positionStart=event.originalEvent.changedTouches[0].clientX}),$carousel.bind("touchend",function(event){var $bulletOn=$(".bullet.on");positionEnd=event.originalEvent.changedTouches[0].clientX,positionStart>positionEnd?fetchImage($bulletOn.next()):positionEnd>positionStart&&fetchImage($bulletOn.prev())})};